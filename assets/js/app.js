"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e){e.preventDefault();var t,n,r,c,u=this.dataset.img;if(u){s.style.display="block",a.style.display="block",u=u.split(","),r=document.createDocumentFragment(),c=document.createDocumentFragment();for(var d=0;d<u.length;d++)(t=document.createElement("li")).innerHTML='<div class = "slider-show__content"><img src = "assets/img/'+u[d]+'"></div>',t.className="slider-show__item",r.appendChild(t),(n=document.createElement("div")).className="slider-show__pagination-item",0==d&&n.classList.add("slider-show__pagination-item--active"),c.appendChild(n);l.innerHTML="",l.appendChild(r),o.innerHTML="",o.appendChild(c),PubSub.publish("openSlider",".slider-show--img")}else s.style.display="none",a.style.display="none",o.innerHTML="",l.innerHTML="",l.innerHTML='<p style = "margin: auto;">Нет информации по данному объекту</p>';i.classList.add("visible")}PubSub.publish("init",".slider-show_rew");for(var t=document.querySelectorAll(".portfolio__item"),n=document.querySelectorAll(".open-slider"),i=document.querySelector(".show-photos-modal"),r=document.querySelector(".slider-show--img"),o=r.querySelector(".slider-show__pagination"),l=document.querySelector(".slider-show__list"),c=t.length,s=r.querySelector(".arrow-left"),a=r.querySelector(".arrow-right"),u=0;u<c;u++)t[u].addEventListener("click",e),n[u].addEventListener("click",e);var d,m=document.getElementById("close-nav"),v=document.querySelector(".main-nav"),_=document.querySelector(".nav-button"),f=document.querySelectorAll(".main-nav__item");for(u=0;u<f.length;u++)f[u].addEventListener("click",function(e){e.preventDefault(),d=e.target.getAttribute("href").slice(1),v.classList.remove("main-nav_active"),window.scrollTo(0,document.getElementById(d).offsetTop)});m.addEventListener("click",function(){console.log("click"),v.classList.remove("main-nav_active")}),_.addEventListener("click",function(){console.log("click"),v.classList.add("main-nav_active")});var h=document.querySelectorAll(".button-order"),y=document.querySelectorAll(".order-modal"),L=document.querySelectorAll(".close"),S=document.querySelectorAll("video"),q=document.querySelectorAll(".staff__video-play");for(u=0;u<h.length;u++)h[u].addEventListener("click",function(e){e.preventDefault(),y[0].classList.add("visible")});for(u=0;u<L.length;u++)L[u].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("visible"),PubSub.publish("init",".slider-show_rew")});q[0].addEventListener("click",function(e){e.stopPropagation(),S[0].paused?S[0].play():S[0].pause()});!function(){function e(){for(var e=0,t=r.length;e<t;e++)r[e].classList.remove("slider__item_active")}function t(t){e(),r[t].classList.add("slider__item_active"),"undefined"!=s&&s[t].classList.add("slider-show__pagination-item--active")}function n(n,u){i=document.querySelector(u),r=i.querySelectorAll(".slider-show__item"),o=i.querySelector(".arrow-left"),l=i.querySelector(".arrow-right"),c=i.querySelector(".slider-show__pagination"),s=c.querySelectorAll(".slider-show__pagination-item"),a=0,o.addEventListener("click",function(){0===a&&(a=r.length),e(),r[a-1].classList.add("slider__item_active"),a--}),l.addEventListener("click",function(){a===r.length-1&&(a=-1),e(),r[a+1].classList.add("slider__item_active"),a++}),t(0)}var i,r,o,l,c,s=[],a=0;PubSub.subscribe("init",n),PubSub.subscribe("openSlider",n)}();var p=document.querySelectorAll(".rewiews__detil");for(u=0;u<p.length;u++)p[u].addEventListener("click",function(){var e=document.querySelectorAll(".abs");console.log(e);for(var t=0;t<e.length;t++)e[t].classList.remove("abs--active");this.children[0].classList.add("abs--active")});!function(){for(var e=document.querySelectorAll(".questions__item"),t=document.querySelectorAll(".questions__answers"),n=0;n<e.length;n++)e[n].addEventListener("click",function(){if(console.log("no"),!this.children[0].classList.contains("questions__text--active")){console.log("no");for(var n=0;n<e.length;n++)e[n].children[0].classList.remove("questions__text--active"),t[n].classList.remove("questions__answers--active")}this.children[0].classList.toggle("questions__text--active"),this.children[1].classList.toggle("questions__answers--active")})}()});var Counter=function(){function e(e){var t=document.querySelector("#days"),n=document.querySelector("#minutes"),i=document.querySelector("#hours"),r=document.querySelector("#sec"),o=function(e){return{days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%864e5%36e5/6e4),sec:Math.floor(e%864e5%36e5%6e4/1e3)}}(e),l=function(e,t){t.textContent=e<10?"0"+e:e};l(o.sec,r),l(o.minutes,n),l(o.hours,i),l(o.days,t)}var t;PubSub.subscribe("init",function(){var n=new Date,i=new Date(2017,11,20),r=i-n;t=setInterval(function(){(r=Math.round(i-Date.now()))<0?clearInterval(t):e(r)},1e3)})}(),Calc=function(){var e=document.querySelectorAll(".calc-button")[0],t=document.querySelectorAll(".calc-modal")[0],n=document.querySelectorAll(".slideValue"),i=document.querySelectorAll(".slider"),r=i[0].value,o=document.querySelectorAll(".rooms-count__item--active")[0],l=document.querySelectorAll(".price-offers__item--active")[0],c=document.querySelectorAll(".rooms-count__item"),s=document.querySelectorAll(".price-offers__item");i[0].addEventListener("input",function(){r=i[0].value,n[0].innerHTML=r+" м <sup>2</sup>"});for(var a=0;a<c.length;a++)c[a].addEventListener("click",function(){for(var e=0;e<c.length;e++)c[e].classList.remove("rooms-count__item--active");this.classList.add("rooms-count__item--active"),o=document.querySelectorAll(".rooms-count__item--active")[0]});for(a=0;a<s.length;a++)s[a].addEventListener("click",function(){for(var e=0;e<s.length;e++)s[e].classList.remove("price-offers__item--active");this.classList.add("price-offers__item--active"),l=document.querySelectorAll(".price-offers__item--active")[0]});PubSub.subscribe("init",function(){e.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".calc-modal__rooms")[0].innerHTML=o.innerHTML,document.querySelectorAll(".calc-modal__repair")[0].innerHTML=l.children[1].innerHTML.split(" ")[0],document.querySelectorAll(".calc-modal__sq")[0].innerHTML=r+" м <sup>2</sup>",document.querySelector(".calc-modal__cost").innerHTML=l.children[0].innerHTML,t.classList.add("visible")})})}(),Modal=function(){function e(e){e.preventDefault;var t=e.target.parentNode,n=t.querySelector(".services__text").innerHTML,r=t.querySelector(".services__title").innerHTML;i.querySelector(".more-modal__text").innerHTML=n,i.querySelector(".more-modal__title").innerHTML=r,i.classList.add("visible")}var t=document,n=t.querySelectorAll(".services__more-button"),i=t.querySelector(".more-modal");PubSub.subscribe("init",function(){for(var t=0;t<n.length;t++)n[t].addEventListener("click",e)})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvdW50ZXIuanMiLCJjYWxjLmpzIiwibW9yZU1vZGFsLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldEltYWdlcyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNsaWRlIiwicGFnaW5hdGlvbkl0ZW0iLCJmcmFnbWVudE9mU2xpZGVzIiwiZnJhZ21lbnRPZlBhZ2luYXRpb25zIiwiaW1hZ2VzIiwidGhpcyIsImRhdGFzZXQiLCJpbWciLCJhcnJvd0xlZnQiLCJzdHlsZSIsImRpc3BsYXkiLCJhcnJvd1JpZ2h0Iiwic3BsaXQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaiIsImxlbmd0aCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNsYXNzTGlzdCIsImFkZCIsInNsaWRlclNob3dMaXN0IiwicGFnaW5hdGlvbiIsIlB1YlN1YiIsInB1Ymxpc2giLCJzbGlkZXJXaW5kb3ciLCJwb3J0Zm9saW9JdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3J0Zm9saW9CdXR0b25zIiwicXVlcnlTZWxlY3RvciIsInNsaWRlckZvclBob3RvIiwicG9ydGZvbGlvSXRDb3VudCIsImkiLCJpZFNlYyIsImJ1dHRvbkNsb3NlTmF2IiwiZ2V0RWxlbWVudEJ5SWQiLCJzaWRlTmF2IiwiYnV0dG9uT3Blbk5hdiIsIm1haW5OYXZJdGVtcyIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInNsaWNlIiwicmVtb3ZlIiwid2luZG93Iiwic2Nyb2xsVG8iLCJvZmZzZXRUb3AiLCJjb25zb2xlIiwibG9nIiwib3JkZXJCdXR0b25zIiwib3JkZXJXaW5kb3ciLCJjbG9zZUJ1dHRvbiIsInZpZGVvIiwicGxheVBhdXNlQnV0dG9uIiwicGFyZW50Tm9kZSIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwicGF1c2VkIiwicGxheSIsInBhdXNlIiwicmVzZXQiLCJtYXgiLCJzbGlkZXJTaG93SXRlbXMiLCJzdGFydFNsaWRlIiwiY3VycmVudFNsaWRlIiwicGFnaW50b25JdGVtcyIsImluaXQiLCJtc2ciLCJzbGlkZXJDbGFzcyIsInNsaWRlciIsInN1YnNjcmliZSIsImRldGFpbEJ1dHRvbnMiLCJhYnMiLCJjaGlsZHJlbiIsInF1ZXN0aW9ucyIsImFuc3ZlciIsImNvbnRhaW5zIiwidG9nZ2xlIiwiQ291bnRlciIsImRpc3BsYXlUaW1lIiwic2Vjb25kTGVmdCIsImRheXNDb250YWluZXIiLCJtaW51dGVzQ29udGFpbmVyIiwiaG91cnNDb250YWluZXIiLCJzZWNDb250YWluZXIiLCJ0aW1lTGVmdCIsIm1zIiwiZGF5cyIsIk1hdGgiLCJmbG9vciIsImhvdXJzIiwibWludXRlcyIsInNlYyIsInRyYW5zZm9ybVRpbWUiLCJjb3JyZWN0VGltZSIsInRpbWVGb3JDb3JyZWN0aW9uIiwiY29udGFpbmVyIiwidGV4dENvbnRlbnQiLCJjb3VudGRvd24iLCJub3ciLCJEYXRlIiwidGhlbiIsInNldEludGVydmFsIiwicm91bmQiLCJjbGVhckludGVydmFsIiwiQ2FsYyIsImNhbGNCdXR0b24iLCJjYWxjV2luZG93Iiwic2xpZGVWYWx1ZSIsImZsYXRTcSIsInZhbHVlIiwiZmxhdFR5cGUiLCJyZXBhaXJUeXBlIiwiY2hlY2tGbGF0VHlwZSIsImNoZWNrUmVwYWlyVHlwZSIsIk1vZGFsIiwic2hvd0Z1bGxUZXh0Iiwic2VydmljZUl0ZW0iLCJzZXJ2aWNlSXRlbVRleHQiLCJzZXJ2aWNlSXRlbVRpdGxlIiwibW9kYWxXaW5kb3ciLCJkb2NPYmoiLCJtb3JlQnV0dG9ucyJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQUEsU0FBQUMsaUJBQUEsbUJBQUEsV0F1QkEsU0FBQUMsRUFBQUMsR0FDQUEsRUFBQUMsaUJBQ0EsSUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFKQUMsRUFBQUMsS0FBQUMsUUFBQUMsSUFNQSxHQUFBSCxFQVNBLENBRUFJLEVBQUFDLE1BQUFDLFFBQUEsUUFDQUMsRUFB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LEVBQUEzRixjQUFBLGVBc0JBTixPQUFBOEMsVUFBQSxPQUxBLFdBQ0EsSUFBQSxJQUFBckMsRUFBQSxFQUFBQSxFQUFBeUYsRUFBQTNHLE9BQUFrQixJQUNBeUYsRUFBQXpGLEdBQUFyQyxpQkFBQSxRQUFBd0gsS0F0QkEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKXtcclxuICBcclxuICBQdWJTdWIucHVibGlzaCggJ2luaXQnLCAnLnNsaWRlci1zaG93X3JldycpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyDQpNC+0YDQvNC40YDRg9C8INGB0LvQsNC50LTQtdGAINGBINC/0L7RgNGC0YTQvtC70LjQvlxyXG5cclxuICB2YXIgcG9ydGZvbGlvSXRlbXMgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcnRmb2xpb19faXRlbScpLFxyXG4gICAgICBwb3J0Zm9saW9CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZW4tc2xpZGVyJyksXHJcbiAgICAgIHNsaWRlcldpbmRvdyAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG93LXBob3Rvcy1tb2RhbCcpLFxyXG4gICAgICBzbGlkZXJGb3JQaG90byAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXNob3ctLWltZycpLFxyXG4gICAgICBwYWdpbmF0aW9uICAgICAgPSBzbGlkZXJGb3JQaG90by5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXNob3dfX3BhZ2luYXRpb24nKSxcclxuICAgICAgc2xpZGVyU2hvd0xpc3QgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlci1zaG93X19saXN0JyksXHJcbiAgICAgIFxyXG4gICAgICBwb3J0Zm9saW9JdENvdW50ID0gcG9ydGZvbGlvSXRlbXMubGVuZ3RoLFxyXG5cclxuICAgICAgYXJyb3dMZWZ0ID0gc2xpZGVyRm9yUGhvdG8ucXVlcnlTZWxlY3RvcignLmFycm93LWxlZnQnKSxcclxuICAgICAgYXJyb3dSaWdodCA9ICBzbGlkZXJGb3JQaG90by5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctcmlnaHQnKTtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0SW1hZ2VzKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBpbWFnZXMgPSB0aGlzLmRhdGFzZXQuaW1nLFxyXG4gICAgICAgIHNsaWRlLFxyXG4gICAgICAgIHBhZ2luYXRpb25JdGVtLFxyXG4gICAgICAgIGZyYWdtZW50T2ZTbGlkZXMsXHJcbiAgICAgICAgZnJhZ21lbnRPZlBhZ2luYXRpb25zO1xyXG5cclxuICAgIGlmKCFpbWFnZXMpIHtcclxuXHJcbiAgICAgIGFycm93TGVmdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIGFycm93UmlnaHQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgcGFnaW5hdGlvbi5pbm5lckhUTUwgPSAnJztcclxuICAgICAgc2xpZGVyU2hvd0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIHNsaWRlclNob3dMaXN0LmlubmVySFRNTCA9ICc8cCBzdHlsZSA9IFwibWFyZ2luOiBhdXRvO1wiPtCd0LXRgiDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9C+INC00LDQvdC90L7QvNGDINC+0LHRitC10LrRgtGDPC9wPic7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIGFycm93TGVmdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICBhcnJvd1JpZ2h0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gICAgICBpbWFnZXMgPSBpbWFnZXMuc3BsaXQoJywnKTtcclxuICAgICAgZnJhZ21lbnRPZlNsaWRlcyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgZnJhZ21lbnRPZlBhZ2luYXRpb25zID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgLy8g0LfQsNC/0L7Qu9C90Y/QtdGCINGB0LvQsNC50LTQtdGAINC60LDRgNGC0LjQvdC60LDQvNC4INC4INC00L7QsdCw0LLQu9C10Lwg0L/QsNCz0LjQvdCw0YbQuNGOXHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW1hZ2VzLmxlbmd0aDsgaisrKSB7XHJcblxyXG4gICAgICAgIHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICBzbGlkZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcyA9IFwic2xpZGVyLXNob3dfX2NvbnRlbnRcIj48aW1nIHNyYyA9IFwiYXNzZXRzL2ltZy8nK2ltYWdlc1tqXSsnXCI+PC9kaXY+J1xyXG4gICAgICAgIHNsaWRlLmNsYXNzTmFtZSA9IFwic2xpZGVyLXNob3dfX2l0ZW1cIjtcclxuICAgICAgICBmcmFnbWVudE9mU2xpZGVzLmFwcGVuZENoaWxkKHNsaWRlKTtcclxuXHJcbiAgICAgICAgcGFnaW5hdGlvbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBwYWdpbmF0aW9uSXRlbS5jbGFzc05hbWUgPSBcInNsaWRlci1zaG93X19wYWdpbmF0aW9uLWl0ZW1cIjtcclxuICAgICAgICBpZiAoaiA9PSAwKSB7XHJcbiAgICAgICAgICBwYWdpbmF0aW9uSXRlbS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItc2hvd19fcGFnaW5hdGlvbi1pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnJhZ21lbnRPZlBhZ2luYXRpb25zLmFwcGVuZENoaWxkKHBhZ2luYXRpb25JdGVtKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2xpZGVyU2hvd0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIHNsaWRlclNob3dMaXN0LmFwcGVuZENoaWxkKGZyYWdtZW50T2ZTbGlkZXMpO1xyXG4gICAgICBcclxuICAgICAgcGFnaW5hdGlvbi5pbm5lckhUTUwgPSAnJztcclxuICAgICAgcGFnaW5hdGlvbi5hcHBlbmRDaGlsZChmcmFnbWVudE9mUGFnaW5hdGlvbnMpOyBcclxuXHJcbiAgICAgIC8vINCX0LDQv9GD0YHRgtC40YLRjCDRgdC70LDQudC00LXRgFxyXG4gICAgICBQdWJTdWIucHVibGlzaCggJ29wZW5TbGlkZXInLCAnLnNsaWRlci1zaG93LS1pbWcnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy/QntGC0LrRgNGL0YLRjCDQvtC60L3QviDRgdC+INGB0LvQsNC50LTQtdGA0L7QvFxyXG4gICAgc2xpZGVyV2luZG93LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgIFxyXG4gIH1cclxuXHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpPHBvcnRmb2xpb0l0Q291bnQ7IGkrKykge1xyXG5cclxuICAgIHBvcnRmb2xpb0l0ZW1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2V0SW1hZ2VzKTtcclxuICAgIHBvcnRmb2xpb0J1dHRvbnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRJbWFnZXMpXHJcblxyXG4gIH1cclxuICBcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gIC8vINC30LDQutGA0YvRgtGML9C+0YLQutGA0YvRgtGMINC90LDQstC40LPQsNGG0LjRjlxyXG5cclxuICB2YXIgYnV0dG9uQ2xvc2VOYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtbmF2JyksXHJcbiAgICAgIHNpZGVOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1uYXYnKSxcclxuICAgICAgYnV0dG9uT3Blbk5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtYnV0dG9uJyksXHJcbiAgICAgIG1haW5OYXZJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLW5hdl9faXRlbScpLFxyXG4gICAgICBpZFNlYztcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IG1haW5OYXZJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgbWFpbk5hdkl0ZW1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWRTZWMgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5zbGljZSgxKTtcclxuICAgICAgc2lkZU5hdi5jbGFzc0xpc3QucmVtb3ZlKCdtYWluLW5hdl9hY3RpdmUnKTtcclxuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkU2VjKS5vZmZzZXRUb3ApO1xyXG5cclxuICAgIH0pXHJcbiAgfVxyXG4gICBcclxuICBidXR0b25DbG9zZU5hdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc29sZS5sb2coJ2NsaWNrJyk7XHJcbiAgICBzaWRlTmF2LmNsYXNzTGlzdC5yZW1vdmUoJ21haW4tbmF2X2FjdGl2ZScpO1xyXG4gIH0pO1xyXG5cclxuICBidXR0b25PcGVuTmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zb2xlLmxvZygnY2xpY2snKTtcclxuICAgIHNpZGVOYXYuY2xhc3NMaXN0LmFkZCgnbWFpbi1uYXZfYWN0aXZlJyk7XHJcbiAgfSk7XHJcblxyXG5cclxuICB2YXIgb3JkZXJCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbi1vcmRlcicpLCBcclxuICAgICAgb3JkZXJXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3JkZXItbW9kYWwnKSxcclxuICAgICAgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2xvc2UnKSxcclxuICAgICAgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd2aWRlbycpLFxyXG4gICAgICBwbGF5UGF1c2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhZmZfX3ZpZGVvLXBsYXknKTtcclxuXHJcbiAgLy8g0L7RgtC60YDRi9GC0LjQtSDQuCDQt9Cw0LrRgNGL0YLQuNC1INC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlckJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgIG9yZGVyQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgb3JkZXJXaW5kb3dbMF0uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgfSlcclxuICB9O1xyXG4gIFxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvc2VCdXR0b24ubGVuZ3RoOyBpKyspIHtcclxuICAgIGNsb3NlQnV0dG9uW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgICBQdWJTdWIucHVibGlzaCggJ2luaXQnLCAnLnNsaWRlci1zaG93X3JldycpO1xyXG4gICAgfSlcclxuICB9O1xyXG4gXHJcblxyXG5cclxuICAvLyDQodC60YDQuNC/0YLRiyDQtNC70Y8g0LLQuNC00LXQvlxyXG4gIHBsYXlQYXVzZUJ1dHRvblswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGlmICh2aWRlb1swXS5wYXVzZWQpIHtcclxuICAgICAgdmlkZW9bMF0ucGxheSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmlkZW9bMF0ucGF1c2UoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcblxyXG5cclxudmFyIGNyZWF0ZVNsaWRlciA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIHNsaWRlcixcclxuICAgICAgICAgICAgc2xpZGVyU2hvd0l0ZW1zLFxyXG4gICAgICAgICAgICBhcnJvd0xlZnQsXHJcbiAgICAgICAgICAgIGFycm93UmlnaHQsXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb24sXHJcbiAgICAgICAgICAgIHBhZ2ludG9uSXRlbXMgPSBbXSxcclxuICAgICAgICAgICAgY3VycmVudFNsaWRlID0gMDtcclxuXHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDAsIG1heCA9IHNsaWRlclNob3dJdGVtcy5sZW5ndGggOyBpIDwgbWF4IDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBzbGlkZXJTaG93SXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19pdGVtX2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0U2xpZGUoY3VycmVudFNsaWRlKSB7XHJcbiAgICAgICAgICByZXNldCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBzbGlkZXJTaG93SXRlbXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgICBpZihwYWdpbnRvbkl0ZW1zIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgcGFnaW50b25JdGVtc1tjdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1zaG93X19wYWdpbmF0aW9uLWl0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNsaWRlTGVmdCgpIHtcclxuICAgICAgICAgIHJlc2V0KCk7XHJcbiAgICAgICAgICBzbGlkZXJTaG93SXRlbXNbY3VycmVudFNsaWRlLTFdLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9faXRlbV9hY3RpdmUnKTtcclxuICAgICAgICAgIGN1cnJlbnRTbGlkZSAtLTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2xpZGVSaWdodCgpIHsgXHJcbiAgICAgICAgICByZXNldCgpO1xyXG4gICAgICAgICAgc2xpZGVyU2hvd0l0ZW1zW2N1cnJlbnRTbGlkZSsxXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgICBjdXJyZW50U2xpZGUgKys7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrUGFnaW5hdGlvbihlKSB7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3BhZ2UtcGFnaW5hdGlvbl9faXRlbS0tYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHBhZ2ludG9uSXRlbXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaWYocGFnaW50b25JdGVtc1tqXSA9PSBlLnRhcmdldCkgY3VycmVudFNsaWRlICA9IGo7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc3RhcnRTbGlkZShjdXJyZW50U2xpZGUpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICBmdW5jdGlvbiBpbml0KG1zZywgc2xpZGVyQ2xhc3MpIHtcclxuXHJcbiAgICAgICAgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJDbGFzcyk7XHJcbiAgICAgICAgc2xpZGVyU2hvd0l0ZW1zID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItc2hvd19faXRlbScpO1xyXG4gICAgICAgIGFycm93TGVmdCA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctbGVmdCcpO1xyXG4gICAgICAgIGFycm93UmlnaHQgPSAgc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5hcnJvdy1yaWdodCcpO1xyXG4gICAgICAgIHBhZ2luYXRpb24gPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlci1zaG93X19wYWdpbmF0aW9uJyk7XHJcbiAgICAgICAgcGFnaW50b25JdGVtcyA9IHBhZ2luYXRpb24ucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1zaG93X19wYWdpbmF0aW9uLWl0ZW0nKTtcclxuICAgICAgICBjdXJyZW50U2xpZGUgPSAwO1xyXG5cclxuICAgICAgICBhcnJvd0xlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKGN1cnJlbnRTbGlkZSA9PT0gMCl7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTbGlkZSA9IHNsaWRlclNob3dJdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzbGlkZUxlZnQoKTtcclxuICAgICAgICB9KVxyXG4gIFxyXG4gICAgICAgIGFycm93UmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKGN1cnJlbnRTbGlkZSA9PT0gc2xpZGVyU2hvd0l0ZW1zLmxlbmd0aCAtIDEpe1xyXG4gICAgICAgICAgICBjdXJyZW50U2xpZGUgPSAtMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNsaWRlUmlnaHQoKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBzdGFydFNsaWRlKDApO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgUHViU3ViLnN1YnNjcmliZSggJ2luaXQnLCBpbml0ICk7XHJcbiAgICAgIFB1YlN1Yi5zdWJzY3JpYmUoICdvcGVuU2xpZGVyJywgaW5pdCApO1xyXG5cclxufSkoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgdmFyIGRldGFpbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV3aWV3c19fZGV0aWwnKTtcclxuICAgIFxyXG4gIGZvcih2YXIgaT0wOyBpPGRldGFpbEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgIFxyXG4gICAgZGV0YWlsQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIHZhciBhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWJzJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhhYnMpO1xyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhYnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgYWJzW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ2Ficy0tYWN0aXZlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRoaXMuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnYWJzLS1hY3RpdmUnKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICBcclxuXHJcblxyXG4vLyDQodC10LrRhtC40Y8g0LLQvtC/0YDQvtGB0YtcclxudmFyIFF1ZXN0aW9ucyA9IChmdW5jdGlvbigpIHtcclxudmFyIHF1ZXN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX2l0ZW0nKTtcclxudmFyIGFuc3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX2Fuc3dlcnMnKTtcclxuXHJcbmZvcih2YXIgaT0wOyBpPHF1ZXN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gIFxyXG4gIHF1ZXN0aW9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc29sZS5sb2coJ25vJyk7XHJcbiAgICBpZiAoISh0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucygncXVlc3Rpb25zX190ZXh0LS1hY3RpdmUnKSkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnbm8nKTtcclxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgcXVlc3Rpb25zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICBxdWVzdGlvbnNbal0uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgncXVlc3Rpb25zX190ZXh0LS1hY3RpdmUnKTtcclxuICAgICAgICAgIGFuc3ZlcltqXS5jbGFzc0xpc3QucmVtb3ZlKCdxdWVzdGlvbnNfX2Fuc3dlcnMtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC50b2dnbGUoJ3F1ZXN0aW9uc19fdGV4dC0tYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlblsxXS5jbGFzc0xpc3QudG9nZ2xlKCdxdWVzdGlvbnNfX2Fuc3dlcnMtLWFjdGl2ZScpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH0pKCk7XHJcblxyXG59KTsiLCJ2YXIgQ291bnRlciA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgY291bnRkb3duO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVRpbWUobXMpIHtcclxuXHJcbiAgICAgICAgdmFyIGRheUxlZnQgICAgID0gIE1hdGguZmxvb3IobXMvODY0MDAwMDApLFxyXG4gICAgICAgICAgICBob3Vyc0xlZnQgICA9ICBNYXRoLmZsb29yKChtcyU4NjQwMDAwMCkvMzYwMDAwMCksXHJcbiAgICAgICAgICAgIG1pbkxlZnQgICAgID0gIE1hdGguZmxvb3IoKChtcyU4NjQwMDAwMCklMzYwMDAwMCkvNjAwMDApLFxyXG4gICAgICAgICAgICBzZWNMZWZ0ICAgICA9ICBNYXRoLmZsb29yKCgoKG1zJTg2NDAwMDAwKSUzNjAwMDAwKSU2MDAwMCkvMTAwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRheXM6IGRheUxlZnQsXHJcbiAgICAgICAgICAgIGhvdXJzOiBob3Vyc0xlZnQsXHJcbiAgICAgICAgICAgIG1pbnV0ZXM6IG1pbkxlZnQsXHJcbiAgICAgICAgICAgIHNlYzogICBzZWNMZWZ0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwbGF5VGltZShzZWNvbmRMZWZ0KSB7XHJcblxyXG4gICAgICAgIHZhciBkYXlzQ29udGFpbmVyICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RheXMnKSxcclxuICAgICAgICAgICAgbWludXRlc0NvbnRhaW5lciAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtaW51dGVzJyksXHJcbiAgICAgICAgICAgIGhvdXJzQ29udGFpbmVyICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG91cnMnKSxcclxuICAgICAgICAgICAgc2VjQ29udGFpbmVyICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWMnKSxcclxuXHJcbiAgICAgICAgICAgIHRpbWVMZWZ0ICAgICAgICAgICAgPSB0cmFuc2Zvcm1UaW1lKHNlY29uZExlZnQpO1xyXG5cclxuICAgICAgICAvLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LrQvtGA0YDQtdC60YbQuNC4INCy0YDQtdC80LXQvdC4ICjQutCz0LTQsCDQstGL0LLQvtC00LjQvCDQsiDQtNC40LIsINC00L7QsdCw0LLQu9GP0LXQvCDQvdC+0LvRjCDQstC/0LXRgNC10LTQuCwg0LXRgdC70Lgg0LzQtdC90YzRiNC1IDEwKVxyXG4gICAgICAgIHZhciBjb3JyZWN0VGltZSA9IGZ1bmN0aW9uKHRpbWVGb3JDb3JyZWN0aW9uLCBjb250YWluZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRpbWVGb3JDb3JyZWN0aW9uIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcwJyArIHRpbWVGb3JDb3JyZWN0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSB0aW1lRm9yQ29ycmVjdGlvbjtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29ycmVjdFRpbWUodGltZUxlZnQuc2VjLCBzZWNDb250YWluZXIgKTtcclxuICAgICAgICBjb3JyZWN0VGltZSh0aW1lTGVmdC5taW51dGVzLCBtaW51dGVzQ29udGFpbmVyICk7XHJcbiAgICAgICAgY29ycmVjdFRpbWUodGltZUxlZnQuaG91cnMsIGhvdXJzQ29udGFpbmVyICk7XHJcbiAgICAgICAgY29ycmVjdFRpbWUodGltZUxlZnQuZGF5cywgZGF5c0NvbnRhaW5lciApO1xyXG4gICAgfTtcclxuICBcclxuICAgIC8vINCh0YLQsNGA0YIg0YLQsNC50LzQtdGA0LBcclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIHRoZW4gPSBuZXcgRGF0ZSAoMjAxNywgMTEsIDIwKSxcclxuICAgICAgICAgICAgc2Vjb25kTGVmdCA9IHRoZW4gLW5vdztcclxuXHJcbiAgICAgICAgY291bnRkb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlY29uZExlZnQgPSBNYXRoLnJvdW5kKCh0aGVuIC0gRGF0ZS5ub3coKSkpO1xyXG4gICAgICAgICAgICBpZihzZWNvbmRMZWZ0IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudGRvd24pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRpc3BsYXlUaW1lKHNlY29uZExlZnQpXHJcbiAgICAgICAgICB9LDEwMDApO1xyXG4gICAgfTtcclxuXHJcbi8vINCf0L7QtNC/0LjRgdGL0LLQsNC10LzRgdGPINC90LAg0YHQvtCx0LjRgtC40LUg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLXHJcblB1YlN1Yi5zdWJzY3JpYmUoICdpbml0JywgaW5pdCApO1xyXG5cclxufSkoKTsiLCJ2YXIgQ2FsYyA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgY2FsY0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjLWJ1dHRvbicpWzBdLFxyXG4gICAgICAgIGNhbGNXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsYy1tb2RhbCcpWzBdLFxyXG5cclxuICAgICAgICBzbGlkZVZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlVmFsdWUnKSxcclxuICAgICAgICBzbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyJyksXHJcblxyXG4gICAgICAgIGZsYXRTcSA9IHNsaWRlclswXS52YWx1ZSxcclxuICAgICAgICBmbGF0VHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb29tcy1jb3VudF9faXRlbS0tYWN0aXZlJylbMF0sXHJcbiAgICAgICAgcmVwYWlyVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmljZS1vZmZlcnNfX2l0ZW0tLWFjdGl2ZScpWzBdLFxyXG5cclxuICAgICAgICBjaGVja0ZsYXRUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb21zLWNvdW50X19pdGVtJyksXHJcbiAgICAgICAgY2hlY2tSZXBhaXJUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByaWNlLW9mZmVyc19faXRlbScpO1xyXG5cclxuICAgICAgICAgLy8g0LjQt9C80LXQvdGP0LXQvCDQv9C70L7RidCw0LTRjCDQutCy0LDRgNGC0LjRgNGLXHJcbiAgICAgICAgc2xpZGVyWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBmbGF0U3EgPSBzbGlkZXJbMF0udmFsdWU7XHJcbiAgICAgICAgICAgIHNsaWRlVmFsdWVbMF0uaW5uZXJIVE1MID0gZmxhdFNxICsgJyDQvCA8c3VwPjI8L3N1cD4nO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vINC/0L7Qu9GD0YfQsNC10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0LrQvtC80L3QsNGCXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja0ZsYXRUeXBlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNoZWNrRmxhdFR5cGVbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2hlY2tGbGF0VHlwZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tGbGF0VHlwZVtqXS5jbGFzc0xpc3QucmVtb3ZlKCdyb29tcy1jb3VudF9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdyb29tcy1jb3VudF9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGZsYXRUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb21zLWNvdW50X19pdGVtLS1hY3RpdmUnKVswXTsgXHJcbiAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDRgtC40L8g0YDQtdC80L7QvdGC0LBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrUmVwYWlyVHlwZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjaGVja1JlcGFpclR5cGVbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2hlY2tSZXBhaXJUeXBlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja1JlcGFpclR5cGVbal0uY2xhc3NMaXN0LnJlbW92ZSgncHJpY2Utb2ZmZXJzX19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgncHJpY2Utb2ZmZXJzX19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgcmVwYWlyVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmljZS1vZmZlcnNfX2l0ZW0tLWFjdGl2ZScpWzBdOyBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgY2FsY0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGMtbW9kYWxfX3Jvb21zJylbMF0uaW5uZXJIVE1MID0gZmxhdFR5cGUuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsYy1tb2RhbF9fcmVwYWlyJylbMF0uaW5uZXJIVE1MID0gcmVwYWlyVHlwZS5jaGlsZHJlblsxXS5pbm5lckhUTUwuc3BsaXQoXCIgXCIpWzBdO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsYy1tb2RhbF9fc3EnKVswXS5pbm5lckhUTUwgPSBmbGF0U3EgKyAnINC8IDxzdXA+Mjwvc3VwPic7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjLW1vZGFsX19jb3N0JykuaW5uZXJIVE1MID0gcmVwYWlyVHlwZS5jaGlsZHJlblswXS5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIGNhbGNXaW5kb3cuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gIFxyXG4gICAgICB2YXIgdG9rZW4gPSBQdWJTdWIuc3Vic2NyaWJlKCAnaW5pdCcsIGluaXQgKTtcclxuICBcclxufSkoKTsiLCJ2YXIgTW9kYWwgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZG9jT2JqICAgICAgICAgID0gZG9jdW1lbnQsXHJcbiAgICAgICAgbW9yZUJ1dHRvbnMgICAgID0gZG9jT2JqLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlc19fbW9yZS1idXR0b24nKSxcclxuICAgICAgICBtb2RhbFdpbmRvdyAgICAgPSBkb2NPYmoucXVlcnlTZWxlY3RvcignLm1vcmUtbW9kYWwnKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNob3dGdWxsVGV4dChlKSB7XHJcblxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0O1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VJdGVtID0gZS50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VJdGVtVGV4dCA9IHNlcnZpY2VJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlc19fdGV4dCcpLmlubmVySFRNTDtcclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VJdGVtVGl0bGUgPSBzZXJ2aWNlSXRlbS5xdWVyeVNlbGVjdG9yKCcuc2VydmljZXNfX3RpdGxlJykuaW5uZXJIVE1MO1xyXG5cclxuICAgICAgICAgICAgbW9kYWxXaW5kb3cucXVlcnlTZWxlY3RvcignLm1vcmUtbW9kYWxfX3RleHQnKS5pbm5lckhUTUwgPSBzZXJ2aWNlSXRlbVRleHQ7XHJcbiAgICAgICAgICAgIG1vZGFsV2luZG93LnF1ZXJ5U2VsZWN0b3IoJy5tb3JlLW1vZGFsX190aXRsZScpLmlubmVySFRNTCA9IHNlcnZpY2VJdGVtVGl0bGU7XHJcblxyXG4gICAgICAgICAgICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vcmVCdXR0b25zLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICBtb3JlQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2hvd0Z1bGxUZXh0KVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgICAgICB2YXIgdG9rZW4gPSBQdWJTdWIuc3Vic2NyaWJlKCAnaW5pdCcsIGluaXQgKTtcclxuICAgIH0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
