"use strict";document.addEventListener("DOMContentLoaded",function(){PubSub.publish("init");for(var e=document.getElementById("close-nav"),t=document.querySelector(".main-nav"),i=document.querySelector(".nav-button"),n=document.querySelectorAll(".main-nav__item"),s="",r=0,o=n.length;r<o;r++)n[r].addEventListener("click",function(e){e.preventDefault(),s=e.target.getAttribute("href").slice(1),t.classList.remove("main-nav_active"),window.scrollTo(0,document.getElementById(s).offsetTop)});e.addEventListener("click",function(){t.classList.remove("main-nav_active")}),i.addEventListener("click",function(){t.classList.add("main-nav_active")});var l=document.querySelectorAll(".button-order"),c=document.querySelector(".order-modal"),a=document.querySelectorAll(".close");for(r=0;r<l.length;r++)l[r].addEventListener("click",function(e){e.preventDefault(c),c.classList.add("visible")});for(r=0;r<a.length;r++)a[r].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("visible")});var d=document.querySelectorAll(".rewiews__detil");for(r=0;r<d.length;r++)d[r].addEventListener("click",function(){for(var e=document.querySelectorAll(".abs"),t=0;t<e.length;t++)e[t].classList.remove("abs--active");this.children[0].classList.add("abs--active")});(function(){function e(e){e.stopPropagation(),t.paused?(t.play(),i.innerHTML=""):(t.pause(),i.innerHTML="")}var t=document.querySelector("video"),i=document.querySelector(".staff__video-play");i.addEventListener("click",e),t.addEventListener("click",e)})(),function(){for(var e=document.querySelectorAll(".questions__item"),t=document.querySelectorAll(".questions__answers"),i=0,n=e.length;i<n;i++)e[i].addEventListener("click",function(){if(!this.children[0].classList.contains("questions__text--active"))for(var i=0;i<e.length;i++)e[i].children[0].classList.remove("questions__text--active"),t[i].classList.remove("questions__answers--active");this.children[0].classList.toggle("questions__text--active"),this.children[1].classList.toggle("questions__answers--active")})}()});var Counter=function(){function e(e){var t=document.querySelector("#days"),i=document.querySelector("#minutes"),n=document.querySelector("#hours"),s=document.querySelector("#sec"),r=function(e){return{days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%864e5%36e5/6e4),sec:Math.floor(e%864e5%36e5%6e4/1e3)}}(e),o=function(e,t){t.textContent=e<10?"0"+e:e};o(r.sec,s),o(r.minutes,i),o(r.hours,n),o(r.days,t)}var t;PubSub.subscribe("init",function(){var i=new Date,n=new Date(2017,11,20),s=n-i;t=setInterval(function(){(s=Math.round(n-Date.now()))<0?clearInterval(t):e(s)},1e3)})}(),Calc=function(){var e=document.querySelectorAll(".calc-button")[0],t=document.querySelectorAll(".calc-modal")[0],i=document.querySelectorAll(".slideValue"),n=document.querySelectorAll(".slider"),s=n[0].value,r=document.querySelectorAll(".rooms-count__item--active")[0],o=document.querySelectorAll(".price-offers__item--active")[0],l=document.querySelectorAll(".rooms-count__item"),c=document.querySelectorAll(".price-offers__item");n[0].addEventListener("input",function(){s=n[0].value,i[0].innerHTML=s+" м <sup>2</sup>"});for(var a=0;a<l.length;a++)l[a].addEventListener("click",function(){for(var e=0;e<l.length;e++)l[e].classList.remove("rooms-count__item--active");this.classList.add("rooms-count__item--active"),r=document.querySelectorAll(".rooms-count__item--active")[0]});for(a=0;a<c.length;a++)c[a].addEventListener("click",function(){for(var e=0;e<c.length;e++)c[e].classList.remove("price-offers__item--active");this.classList.add("price-offers__item--active"),o=document.querySelectorAll(".price-offers__item--active")[0]});PubSub.subscribe("init",function(){e.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".calc-modal__rooms")[0].innerHTML=r.innerHTML,document.querySelectorAll(".calc-modal__repair")[0].innerHTML=o.children[1].innerHTML.split(" ")[0],document.querySelectorAll(".calc-modal__sq")[0].innerHTML=s+" м <sup>2</sup>",document.querySelector(".calc-modal__cost").innerHTML=o.children[0].innerHTML,t.classList.add("visible")})})}(),Modal=function(){function e(e){e.preventDefault;var t=e.target.parentNode,i=t.querySelector(".services__text").innerHTML,s=t.querySelector(".services__title").innerHTML;n.querySelector(".more-modal__text").innerHTML=i,n.querySelector(".more-modal__title").innerHTML=s,n.classList.add("visible")}var t=document,i=t.querySelectorAll(".services__more-button"),n=t.querySelector(".more-modal");PubSub.subscribe("init",function(){for(var t=0;t<i.length;t++)i[t].addEventListener("click",e)})}(),Slider=function(e){var t=0,i=this;this.sliderShow=document.querySelector(e),this.sliderShowItems=this.sliderShow.querySelectorAll(".slider-show__item"),this.arrowLeft=this.sliderShow.querySelector(".arrow-left"),this.arrowRight=this.sliderShow.querySelector(".arrow-right"),this.pagination=this.sliderShow.querySelector(".slider-show__pagination"),this.paginationItems=[],this.createPagination=function(e){for(var t,i=this.sliderShowItems.length,n=document.createDocumentFragment(),s=0;s<i;s++)(t=document.createElement("div")).className="slider-show__pagination-item",0==s&&t.classList.add("slider-show__pagination-item--active"),n.appendChild(t);this.pagination.innerHTML="",this.pagination.appendChild(n)},this.clickPagination=function(e){i.reset(),e.target.classList.add("page-pagination__item--active");for(var n=0;n<i.pagintonItems.length;n++)i.pagintonItems[n]==e.target&&(t=n);i.sliderShowItems[t].classList.add("slider__item_active"),i.pagintonItems[t].classList.add("slider-show__pagination-item--active")},this.reset=function(){for(var e=0,t=this.sliderShowItems.length;e<t;e++)this.sliderShowItems[e].classList.remove("slider__item_active"),this.pagintonItems[e].classList.remove("slider-show__pagination-item--active")},this.startSlide=function(t){this.createPagination(e),this.pagintonItems=this.pagination.querySelectorAll(".slider-show__pagination-item"),this.reset(),this.sliderShowItems[t].classList.add("slider__item_active"),this.pagintonItems[t].classList.add("slider-show__pagination-item--active"),this.init()},this.slideLeft=function(){this.reset(),this.sliderShowItems[t-1].classList.add("slider__item_active"),this.pagintonItems[t-1].classList.add("slider-show__pagination-item--active"),t--},this.slideRight=function(){this.reset(),this.sliderShowItems[t+1].classList.add("slider__item_active"),this.pagintonItems[t+1].classList.add("slider-show__pagination-item--active"),t++},this.init=function(){for(var e=0,n=this.pagintonItems.length;e<n;e++)this.pagintonItems[e].addEventListener("click",this.clickPagination);this.arrowLeft.addEventListener("click",function(){0===t&&(t=i.sliderShowItems.length),i.slideLeft()}),this.arrowRight.addEventListener("click",function(){t===i.sliderShowItems.length-1&&(t=-1),i.slideRight()})}},sliderForPortfolio=function(){function e(e){e.preventDefault();var t,i,s=this.dataset.img;if(s){l.style.display="block",c.style.display="block",s=s.split(","),i=document.createDocumentFragment();for(var a=0;a<s.length;a++)(t=document.createElement("li")).innerHTML='<div class = "slider-show__content"><img src = "assets/img/'+s[a]+'"></div>',t.className="slider-show__item",i.appendChild(t);o.innerHTML="",o.appendChild(i);new Slider(".slider-show--img").startSlide(0)}else l.style.display="none",c.style.display="none",r.innerHTML="",o.innerHTML="",o.innerHTML='<p style = "margin: auto;">Нет информации по данному объекту</p>';n.classList.add("visible")}for(var t=document.querySelectorAll(".portfolio__item"),i=document.querySelectorAll(".open-slider"),n=(t.length,document.querySelector(".show-photos-modal")),s=document.querySelector(".slider-show--img"),r=s.querySelector(".slider-show__pagination"),o=document.querySelector(".slider-show__list"),l=s.querySelector(".arrow-left"),c=s.querySelector(".arrow-right"),a=0;a<t.length;a++)t[a].addEventListener("click",e),i[a].addEventListener("click",e)}(),rewiewSlider=void new Slider(".slider-show_rew").startSlide(0);