document.addEventListener("DOMContentLoaded",function(){function e(){for(var e=0;e<_.length;e++)_[e].classList.remove("page-pagination__item--active")}function t(){for(var e=0;e<L.length;e++)L[e].classList.remove("slider__item_active")}function n(e){t(),_=document.querySelectorAll(".page-pagination__item"),L[e].classList.add("slider__item_active"),_[e].classList.add("page-pagination__item--active")}PubSub.publish("init");var c,i=document.getElementById("close-nav"),o=document.querySelector(".main-nav"),l=document.querySelector(".nav-button"),r=document.querySelectorAll(".main-nav__item");for(v=0;v<r.length;v++)r[v].addEventListener("click",function(e){e.preventDefault(),c=e.target.getAttribute("href").slice(1),o.classList.remove("main-nav_active"),window.scrollTo(0,document.getElementById(c).offsetTop)});i.addEventListener("click",function(){console.log("click"),o.classList.remove("main-nav_active")}),l.addEventListener("click",function(){console.log("click"),o.classList.add("main-nav_active")});for(var a=document.querySelectorAll(".button-order"),s=document.querySelectorAll(".order-modal"),u=document.querySelectorAll(".close"),d=document.querySelectorAll("video"),m=document.querySelectorAll(".staff__video-play"),v=0;v<a.length;v++)a[v].addEventListener("click",function(e){e.preventDefault(),s[0].classList.add("visible")});for(v=0;v<u.length;v++)u[v].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("visible")});m[0].addEventListener("click",function(e){e.stopPropagation(),d[0].paused?d[0].play():d[0].pause()});var _,f,L=document.querySelectorAll(".rewiews__item"),g=document.querySelector("#arrow-left"),h=document.querySelector("#arrow-right"),q=(document.querySelector(".slider"),document.querySelector(".page-pagination--linear")),y=0;g.addEventListener("click",function(){0===y&&(y=L.length),t(),e(),L[y-1].classList.add("slider__item_active"),_[y-1].classList.add("page-pagination__item--active"),y--}),h.addEventListener("click",function(){y===L.length-1&&(y=-1),t(),e(),L[y+1].classList.add("slider__item_active"),_[y+1].classList.add("page-pagination__item--active"),y++}),function(){for(var t=0;t<L.length;t++)(f=document.createElement("div")).className="page-pagination__item",q.appendChild(f),f.addEventListener("click",function(t){_=document.querySelectorAll(".page-pagination__item"),e();for(var c=0;c<q.children.length;c++)q.children[c]==t.target&&(y=c);n(y)})}(),n(0);var p=document.querySelectorAll(".rewiews__detil");for(v=0;v<p.length;v++)p[v].addEventListener("click",function(){var e=document.querySelectorAll(".abs");console.log(e);for(var t=0;t<e.length;t++)e[t].classList.remove("abs--active");this.children[0].classList.add("abs--active")});var S=document.querySelectorAll(".questions__item"),A=document.querySelectorAll(".questions__answers");for(v=0;v<S.length;v++)S[v].addEventListener("click",function(){if(!this.children[0].classList.contains("questions__text--active"))for(console.log("no"),j=0;j<S.length;j++)S[j].children[0].classList.remove("questions__text--active"),A[j].classList.remove("questions__answers--active");this.children[0].classList.toggle("questions__text--active"),this.children[1].classList.toggle("questions__answers--active")})});var Counter=function(){function e(e){var t=document.querySelector("#days"),n=document.querySelector("#minutes"),c=document.querySelector("#hours"),o=document.querySelector("#sec"),l={days:Math.floor(i/864e5),hours:Math.floor(i%864e5/1e3/60/60),minutes:Math.floor(i%864e5%36e5/1e3/60),sec:Math.floor(i%864e5%36e5%6e4/1e3)};o.textContent=l.sec<10?"0"+l.sec:l.sec,n.textContent=l.minutes,c.textContent=l.hours,t.textContent=l.days}var t,n=new Date,c=new Date(2017,11,20),i=c-n;PubSub.subscribe("init",function(){t=setInterval(function(){(i=Math.round(c-Date.now()))<0?clearInterval(t):e()},1e3)})}(),Calc=function(){var e=document.querySelectorAll(".calc-button")[0],t=document.querySelectorAll(".calc-modal")[0],n=document.querySelectorAll(".slideValue"),c=document.querySelectorAll(".slider"),i=c[0].value,o=document.querySelectorAll(".rooms-count__item--active")[0],l=document.querySelectorAll(".price-offers__item--active")[0],r=document.querySelectorAll(".rooms-count__item"),a=document.querySelectorAll(".price-offers__item");c[0].addEventListener("input",function(){i=c[0].value,n[0].innerHTML=i+" м <sup>2</sup>"});for(var s=0;s<r.length;s++)r[s].addEventListener("click",function(){for(var e=0;e<r.length;e++)r[e].classList.remove("rooms-count__item--active");this.classList.add("rooms-count__item--active"),o=document.querySelectorAll(".rooms-count__item--active")[0]});for(s=0;s<a.length;s++)a[s].addEventListener("click",function(){for(var e=0;e<a.length;e++)a[e].classList.remove("price-offers__item--active");this.classList.add("price-offers__item--active"),l=document.querySelectorAll(".price-offers__item--active")[0]});PubSub.subscribe("init",function(){e.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".calc-modal__rooms")[0].innerHTML=o.innerHTML,document.querySelectorAll(".calc-modal__repair")[0].innerHTML=l.children[1].innerHTML.split(" ")[0],document.querySelectorAll(".calc-modal__sq")[0].innerHTML=i+" м <sup>2</sup>",document.querySelector(".calc-modal__cost").innerHTML=l.children[0].innerHTML,t.classList.add("visible")})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvdW50ZXIuanMiLCJjYWxjLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0UGFnaW5hdGlvbiIsImoiLCJwYWdJdGVtcyIsImxlbmd0aCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlc2V0IiwiaSIsInNsaWRlckl0ZW1zIiwic3RhcnRTbGlkZSIsImN1cnJlbnRTbGlkZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGQiLCJQdWJTdWIiLCJwdWJsaXNoIiwiaWRTZWMiLCJidXR0b25DbG9zZU5hdiIsImdldEVsZW1lbnRCeUlkIiwic2lkZU5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJidXR0b25PcGVuTmF2IiwibWFpbk5hdkl0ZW1zIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwic2xpY2UiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsIm9mZnNldFRvcCIsImNvbnNvbGUiLCJsb2ciLCJvcmRlckJ1dHRvbnMiLCJvcmRlcldpbmRvdyIsImNsb3NlQnV0dG9uIiwidmlkZW8iLCJwbGF5UGF1c2VCdXR0b24iLCJ0aGlzIiwicGFyZW50Tm9kZSIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwicGF1c2VkIiwicGxheSIsInBhdXNlIiwibmV3RWwiLCJhcnJvd0xlZnQiLCJhcnJvd1JpZ2h0IiwicGFnIiwiY3VycmVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNoaWxkcmVuIiwiY3JlYXRlUGFnaW5hdGlvbiIsImRldGFpbEJ1dHRvbnMiLCJhYnMiLCJxdWVzdGlvbnMiLCJhbnN2ZXIiLCJjb250YWlucyIsInRvZ2dsZSIsIkNvdW50ZXIiLCJkaXNwbGF5VGltZSIsInNlY29uZExlZnQiLCJkYXlzIiwibWludXRlcyIsImhvdXJzIiwic2VjIiwidGltZUxlZnQiLCJNYXRoIiwiZmxvb3IiLCJ0ZXh0Q29udGVudCIsImNvdW50ZG93biIsIm5vdyIsIkRhdGUiLCJ0aGVuIiwic3Vic2NyaWJlIiwic2V0SW50ZXJ2YWwiLCJyb3VuZCIsImNsZWFySW50ZXJ2YWwiLCJDYWxjIiwiY2FsY0J1dHRvbiIsImNhbGNXaW5kb3ciLCJzbGlkZVZhbHVlIiwic2xpZGVyIiwiZmxhdFNxIiwidmFsdWUiLCJmbGF0VHlwZSIsInJlcGFpclR5cGUiLCJjaGVja0ZsYXRUeXBlIiwiY2hlY2tSZXBhaXJUeXBlIiwiaW5uZXJIVE1MIiwic3BsaXQiXSwibWFwcGluZ3MiOiJBQUtBQSxTQUFBQyxpQkFBQSxtQkFBQSxXQTZFQSxTQUFBQyxJQUNBLElBQUEsSUFBQUMsRUFBQSxFQUFBQSxFQUFBQyxFQUFBQyxPQUFBRixJQUNBQyxFQUFBRCxHQUFBRyxVQUFBQyxPQUFBLGlDQXFCQSxTQUFBQyxJQUNBLElBQUEsSUFBQUMsRUFBQSxFQUFBQSxFQUFBQyxFQUFBTCxPQUFBSSxJQUNBQyxFQUFBRCxHQUFBSCxVQUFBQyxPQUFBLHVCQUtBLFNBQUFJLEVBQUFDLEdBQ0FKLElBQ0FKLEVBQUFKLFNBQUFhLGlCQUFBLDBCQUNBSCxFQUFBRSxHQUFBTixVQUFBUSxJQUFBLHVCQUNBVixFQUFBUSxHQUFBTixVQUFBUSxJQUFBLGlDQTdHQUMsT0FBQUMsUUFBQSxRQUlBLElBSUFDLEVBSkFDLEVBQUFsQixTQUFBbUIsZUFBQSxhQUNBQyxFQUFBcEIsU0FBQXFCLGNBQUEsYUFDQUMsRUFBQXRCLFNBQUFxQixjQUFBLGVBQ0FFLEVBQUF2QixTQUFBYSxpQkFBQSxtQkFHQSxJQUFBSixFQUFBLEVBQUFBLEVBQUFjLEVBQUFsQixPQUFBSSxJQUNBYyxFQUFBZCxHQUFBUixpQkFBQSxRQUFBLFNBQUF1QixHQUNBQSxFQUFBQyxpQkFDQVIsRUFBQU8sRUFBQUUsT0FBQUMsYUFBQSxRQUFBQyxNQUFBLEdBQ0FSLEVBQUFkLFVBQUFDLE9BQUEsbUJBQ0FzQixPQUFBQyxTQUFBLEVBQUE5QixTQUFBbUIsZUFBQUYsR0FBQWMsYUFLQWIsRUFBQWpCLGlCQUFBLFFBQUEsV0FDQStCLFFB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RixTQUFBYSxpQkFBQSxtQkFBQSxHQUFBK0UsVUFBQU4sRUFBQSxrQkFDQXRGLFNBQUFxQixjQUFBLHFCQUFBdUUsVUFBQUgsRUFBQW5DLFNBQUEsR0FBQXNDLFVBQ0FULEVBQUE3RSxVQUFBUSxJQUFBLGVBbERBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBjb25zb2xlLmxvZygnSGVsbG8nKTtcclxufSkoKTtcclxuKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKXtcclxuXHJcbiAgUHViU3ViLnB1Ymxpc2goICdpbml0Jyk7XHJcbiAgXHJcbiAgLy8g0LfQsNC60YDRi9GC0Ywv0L7RgtC60YDRi9GC0Ywg0L3QsNCy0LjQs9Cw0YbQuNGOXHJcblxyXG4gIHZhciBidXR0b25DbG9zZU5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1uYXYnKSxcclxuICAgICAgc2lkZU5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW5hdicpLFxyXG4gICAgICBidXR0b25PcGVuTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdi1idXR0b24nKSxcclxuICAgICAgbWFpbk5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tbmF2X19pdGVtJyksXHJcbiAgICAgIGlkU2VjO1xyXG5cclxuICBmb3IgKGkgPSAwOyBpIDwgbWFpbk5hdkl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBtYWluTmF2SXRlbXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZFNlYyA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpLnNsaWNlKDEpO1xyXG4gICAgICBzaWRlTmF2LmNsYXNzTGlzdC5yZW1vdmUoJ21haW4tbmF2X2FjdGl2ZScpO1xyXG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRTZWMpLm9mZnNldFRvcCk7XHJcblxyXG4gICAgfSlcclxuICB9XHJcbiAgIFxyXG4gIGJ1dHRvbkNsb3NlTmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zb2xlLmxvZygnY2xpY2snKTtcclxuICAgIHNpZGVOYXYuY2xhc3NMaXN0LnJlbW92ZSgnbWFpbi1uYXZfYWN0aXZlJyk7XHJcbiAgfSk7XHJcblxyXG4gIGJ1dHRvbk9wZW5OYXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xyXG4gICAgc2lkZU5hdi5jbGFzc0xpc3QuYWRkKCdtYWluLW5hdl9hY3RpdmUnKTtcclxuICB9KTtcclxuXHJcblxyXG4gIHZhciBvcmRlckJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV0dG9uLW9yZGVyJyksIFxyXG4gICAgICBvcmRlcldpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcmRlci1tb2RhbCcpLFxyXG4gICAgICBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpLFxyXG4gICAgICB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ZpZGVvJyksXHJcbiAgICAgIHBsYXlQYXVzZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFmZl9fdmlkZW8tcGxheScpO1xyXG5cclxuICAvLyDQvtGC0LrRgNGL0YLQuNC1INC4INC30LDQutGA0YvRgtC40LUg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyQnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgb3JkZXJCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBvcmRlcldpbmRvd1swXS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICB9KVxyXG4gIH07XHJcbiAgXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9zZUJ1dHRvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgY2xvc2VCdXR0b25baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICB9KVxyXG4gIH07XHJcbiBcclxuXHJcblxyXG4gIC8vINCh0LrRgNC40L/RgtGLINC00LvRjyDQstC40LTQtdC+XHJcbiAgcGxheVBhdXNlQnV0dG9uWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKHZpZGVvWzBdLnBhdXNlZCkge1xyXG4gICAgICB2aWRlb1swXS5wbGF5KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2aWRlb1swXS5wYXVzZSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8g0JTQu9GPINGB0LvQsNC50LTQtdGA0LAg0YEg0L7RgtC30YvQstCw0LzQuCBcclxuXHJcbiAgdmFyIHNsaWRlckl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJld2lld3NfX2l0ZW0nKSxcclxuICAgICAgYXJyb3dMZWZ0ICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnJvdy1sZWZ0JyksXHJcbiAgICAgIGFycm93UmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXJyb3ctcmlnaHQnKSxcclxuICAgICAgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLFxyXG4gICAgICBwYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS1wYWdpbmF0aW9uLS1saW5lYXInKSxcclxuICAgICAgcGFnSXRlbXMsXHJcbiAgICAgIG5ld0VsLFxyXG4gICAgICBjdXJyZW50ID0gMDtcclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIHJlc2V0UGFnaW5hdGlvbigpIHtcclxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgcGFnSXRlbXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIHBhZ0l0ZW1zW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2UtcGFnaW5hdGlvbl9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjcmVhdGVQYWdpbmF0aW9uKCkge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzbGlkZXJJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbmV3RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIG5ld0VsLmNsYXNzTmFtZSA9IFwicGFnZS1wYWdpbmF0aW9uX19pdGVtXCI7XHJcbiAgICAgICAgICBwYWcuYXBwZW5kQ2hpbGQobmV3RWwpO1xyXG4gICAgICAgICAgbmV3RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHBhZ0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UtcGFnaW5hdGlvbl9faXRlbScpO1xyXG4gICAgICAgICAgICByZXNldFBhZ2luYXRpb24oKTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHBhZy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYocGFnLmNoaWxkcmVuW2pdID09IGUudGFyZ2V0KSBjdXJyZW50ICA9IGo7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFydFNsaWRlKGN1cnJlbnQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNsaWRlckl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBzbGlkZXJJdGVtc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgZnVuY3Rpb24gc3RhcnRTbGlkZShjdXJyZW50U2xpZGUpIHtcclxuICAgICAgICByZXNldCgpO1xyXG4gICAgICAgIHBhZ0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UtcGFnaW5hdGlvbl9faXRlbScpXHJcbiAgICAgICAgc2xpZGVySXRlbXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgcGFnSXRlbXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QuYWRkKCdwYWdlLXBhZ2luYXRpb25fX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBzbGlkZUxlZnQoKSB7XHJcbiAgICAgICAgcmVzZXQoKTtcclxuICAgICAgICByZXNldFBhZ2luYXRpb24oKTtcclxuICAgICAgICBzbGlkZXJJdGVtc1tjdXJyZW50LTFdLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9faXRlbV9hY3RpdmUnKTtcclxuICAgICAgICBwYWdJdGVtc1tjdXJyZW50LTFdLmNsYXNzTGlzdC5hZGQoJ3BhZ2UtcGFnaW5hdGlvbl9faXRlbS0tYWN0aXZlJylcclxuICAgICAgICBjdXJyZW50IC0tO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBzbGlkZVJpZ2h0KCkge1xyXG4gICAgICAgIHJlc2V0KCk7XHJcbiAgICAgICAgcmVzZXRQYWdpbmF0aW9uKCk7XHJcbiAgICAgICAgc2xpZGVySXRlbXNbY3VycmVudCsxXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgcGFnSXRlbXNbY3VycmVudCsxXS5jbGFzc0xpc3QuYWRkKCdwYWdlLXBhZ2luYXRpb25fX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgIGN1cnJlbnQgKys7XHJcbiAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgIGFycm93TGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKGN1cnJlbnQgPT09IDApe1xyXG4gICAgICAgICAgY3VycmVudCA9IHNsaWRlckl0ZW1zLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpZGVMZWZ0KCk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBhcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoY3VycmVudCA9PT0gc2xpZGVySXRlbXMubGVuZ3RoIC0gMSl7XHJcbiAgICAgICAgICBjdXJyZW50ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNsaWRlUmlnaHQoKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNyZWF0ZVBhZ2luYXRpb24oKTtcclxuICAgICAgc3RhcnRTbGlkZSgwKTtcclxuICBcclxuXHJcblxyXG4gIHZhciBkZXRhaWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJld2lld3NfX2RldGlsJyk7XHJcbiAgICBcclxuICBmb3IodmFyIGk9MDsgaTxkZXRhaWxCdXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBcclxuICAgIGRldGFpbEJ1dHRvbnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICB2YXIgYWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFicycpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYWJzKTtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYWJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGFic1tqXS5jbGFzc0xpc3QucmVtb3ZlKCdhYnMtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ2Ficy0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgXHJcblxyXG5cclxuLy8g0KHQtdC60YbQuNGPINCy0L7Qv9GA0L7RgdGLXHJcblxyXG52YXIgcXVlc3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnF1ZXN0aW9uc19faXRlbScpO1xyXG52YXIgYW5zdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnF1ZXN0aW9uc19fYW5zd2VycycpO1xyXG5cclxuZm9yKHZhciBpPTA7IGk8cXVlc3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgXHJcbiAgcXVlc3Rpb25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgaWYgKCEodGhpcy5jaGlsZHJlblswXS5jbGFzc0xpc3QuY29udGFpbnMoJ3F1ZXN0aW9uc19fdGV4dC0tYWN0aXZlJykpKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ25vJyk7XHJcbiAgICAgICAgZm9yKGogPSAwOyBqIDwgcXVlc3Rpb25zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICBxdWVzdGlvbnNbal0uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgncXVlc3Rpb25zX190ZXh0LS1hY3RpdmUnKTtcclxuICAgICAgICAgIGFuc3ZlcltqXS5jbGFzc0xpc3QucmVtb3ZlKCdxdWVzdGlvbnNfX2Fuc3dlcnMtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC50b2dnbGUoJ3F1ZXN0aW9uc19fdGV4dC0tYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlblsxXS5jbGFzc0xpc3QudG9nZ2xlKCdxdWVzdGlvbnNfX2Fuc3dlcnMtLWFjdGl2ZScpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG59KTsiLCJ2YXIgQ291bnRlciA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICBcclxuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIHRoZW4gPSBuZXcgRGF0ZSAoMjAxNywgMTEsIDIwKTtcclxuICAgIHZhciBzZWNvbmRMZWZ0ID0gdGhlbiAtbm93O1xyXG4gICAgdmFyIGNvdW50ZG93biwgc2Vjb25kTGVmdDtcclxuXHJcbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1UaW1lKG1zKSB7XHJcblxyXG4gICAgICAgIHZhciBkYXlMZWZ0ID0gTWF0aC5mbG9vcihzZWNvbmRMZWZ0Lzg2NDAwMDAwKSxcclxuICAgICAgICAgICAgaG91cnNMZWZ0ID0gIE1hdGguZmxvb3IoKHNlY29uZExlZnQlODY0MDAwMDApLzEwMDAvNjAvNjApLFxyXG4gICAgICAgICAgICBtaW5MZWZ0ID0gTWF0aC5mbG9vcigoKHNlY29uZExlZnQlODY0MDAwMDApJTM2MDAwMDApLzEwMDAvNjApLFxyXG4gICAgICAgICAgICBzZWNMZWZ0ID0gTWF0aC5mbG9vcigoKChzZWNvbmRMZWZ0JTg2NDAwMDAwKSUzNjAwMDAwKSU2MDAwMCkvMTAwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRheXM6IGRheUxlZnQsXHJcbiAgICAgICAgICAgIGhvdXJzOiBob3Vyc0xlZnQsXHJcbiAgICAgICAgICAgIG1pbnV0ZXM6IG1pbkxlZnQsXHJcbiAgICAgICAgICAgIHNlYzogICBzZWNMZWZ0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRpc3BsYXlUaW1lKHNlY29uZExlZnQpIHtcclxuXHJcbiAgICAgICAgdmFyIGRheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF5cycpLFxyXG4gICAgICAgICAgICBtaW51dGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21pbnV0ZXMnKSxcclxuICAgICAgICAgICAgaG91cnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG91cnMnKSxcclxuICAgICAgICAgICAgc2VjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYycpO1xyXG5cclxuICAgICAgICB2YXIgdGltZUxlZnQgPSB0cmFuc2Zvcm1UaW1lKHNlY29uZExlZnQpO1xyXG5cclxuICAgICAgICBpZiAodGltZUxlZnQuc2VjIDwgMTApIHtcclxuICAgICAgICAgICAgc2VjLnRleHRDb250ZW50ID0gJzAnK3RpbWVMZWZ0LnNlYztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWMudGV4dENvbnRlbnQgPSB0aW1lTGVmdC5zZWM7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAgICAgbWludXRlcy50ZXh0Q29udGVudCA9IHRpbWVMZWZ0Lm1pbnV0ZXM7XHJcbiAgICAgICAgICAgIGhvdXJzLnRleHRDb250ZW50ID0gdGltZUxlZnQuaG91cnM7XHJcbiAgICAgICAgICAgIGRheXMudGV4dENvbnRlbnQgPSB0aW1lTGVmdC5kYXlzO1xyXG4gICAgfTtcclxuICBcclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY291bnRkb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2Vjb25kTGVmdCA9IE1hdGgucm91bmQoKHRoZW4gLSBEYXRlLm5vdygpKSk7XHJcbiAgICAgICAgaWYoc2Vjb25kTGVmdCA8IDApIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudGRvd24pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc3BsYXlUaW1lKHNlY29uZExlZnQpXHJcbiAgICAgICAgICB9LDEwMDApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdmFyIHRva2VuID0gUHViU3ViLnN1YnNjcmliZSggJ2luaXQnLCBpbml0ICk7XHJcblxyXG59KSgpOyIsInZhciBDYWxjID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBjYWxjQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGMtYnV0dG9uJylbMF0sXHJcbiAgICAgICAgY2FsY1dpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjLW1vZGFsJylbMF0sXHJcblxyXG4gICAgICAgIHNsaWRlVmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVWYWx1ZScpLFxyXG4gICAgICAgIHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXInKSxcclxuXHJcbiAgICAgICAgZmxhdFNxID0gc2xpZGVyWzBdLnZhbHVlLFxyXG4gICAgICAgIGZsYXRUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb21zLWNvdW50X19pdGVtLS1hY3RpdmUnKVswXSxcclxuICAgICAgICByZXBhaXJUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByaWNlLW9mZmVyc19faXRlbS0tYWN0aXZlJylbMF0sXHJcblxyXG4gICAgICAgIGNoZWNrRmxhdFR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbXMtY291bnRfX2l0ZW0nKSxcclxuICAgICAgICBjaGVja1JlcGFpclR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJpY2Utb2ZmZXJzX19pdGVtJyk7XHJcblxyXG4gICAgICAgICAvLyDQuNC30LzQtdC90Y/QtdC8INC/0LvQvtGJ0LDQtNGMINC60LLQsNGA0YLQuNGA0YtcclxuICAgICAgICBzbGlkZXJbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGZsYXRTcSA9IHNsaWRlclswXS52YWx1ZTtcclxuICAgICAgICAgICAgc2xpZGVWYWx1ZVswXS5pbm5lckhUTUwgPSBmbGF0U3EgKyAnINC8IDxzdXA+Mjwvc3VwPic7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQviDQutC+0LzQvdCw0YJcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrRmxhdFR5cGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2hlY2tGbGF0VHlwZVtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGVja0ZsYXRUeXBlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja0ZsYXRUeXBlW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3Jvb21zLWNvdW50X19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3Jvb21zLWNvdW50X19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgZmxhdFR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbXMtY291bnRfX2l0ZW0tLWFjdGl2ZScpWzBdOyBcclxuICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INGC0LjQvyDRgNC10LzQvtC90YLQsFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tSZXBhaXJUeXBlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNoZWNrUmVwYWlyVHlwZVtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGVja1JlcGFpclR5cGUubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrUmVwYWlyVHlwZVtqXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmljZS1vZmZlcnNfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdwcmljZS1vZmZlcnNfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICByZXBhaXJUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByaWNlLW9mZmVyc19faXRlbS0tYWN0aXZlJylbMF07IFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICBjYWxjQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsYy1tb2RhbF9fcm9vbXMnKVswXS5pbm5lckhUTUwgPSBmbGF0VHlwZS5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjLW1vZGFsX19yZXBhaXInKVswXS5pbm5lckhUTUwgPSByZXBhaXJUeXBlLmNoaWxkcmVuWzFdLmlubmVySFRNTC5zcGxpdChcIiBcIilbMF07XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjLW1vZGFsX19zcScpWzBdLmlubmVySFRNTCA9IGZsYXRTcSArICcg0LwgPHN1cD4yPC9zdXA+JztcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGMtbW9kYWxfX2Nvc3QnKS5pbm5lckhUTUwgPSByZXBhaXJUeXBlLmNoaWxkcmVuWzBdLmlubmVySFRNTDtcclxuICAgICAgICAgICAgY2FsY1dpbmRvdy5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSAgXHJcbiAgICAgIHZhciB0b2tlbiA9IFB1YlN1Yi5zdWJzY3JpYmUoICdpbml0JywgaW5pdCApO1xyXG4gIFxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
