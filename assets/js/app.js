document.addEventListener("DOMContentLoaded",function(){function e(){for(var e=0;e<s.length;e++)s[e].classList.remove("page-pagination__item--active")}function t(){for(var e=0;e<d.length;e++)d[e].classList.remove("slider__item_active")}function n(e){t(),s=document.querySelectorAll(".page-pagination__item"),d[e].classList.add("slider__item_active"),s[e].classList.add("page-pagination__item--active")}PubSub.publish("init");for(var i=document.querySelectorAll(".button-order"),c=document.querySelectorAll(".order-modal"),o=document.querySelectorAll(".close"),l=document.querySelectorAll("video"),r=document.querySelectorAll(".staff__video-play"),a=0;a<i.length;a++)i[a].addEventListener("click",function(e){e.preventDefault(),c[0].classList.add("visible")});for(a=0;a<o.length;a++)o[a].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("visible")});r[0].addEventListener("click",function(e){e.stopPropagation(),l[0].paused?l[0].play():l[0].pause()});var s,u,d=document.querySelectorAll(".rewiews__item"),m=document.querySelector("#arrow-left"),v=document.querySelector("#arrow-right"),_=(document.querySelector(".slider"),document.querySelector(".page-pagination--linear")),f=0;m.addEventListener("click",function(){0===f&&(f=d.length),t(),e(),d[f-1].classList.add("slider__item_active"),s[f-1].classList.add("page-pagination__item--active"),f--}),v.addEventListener("click",function(){f===d.length-1&&(f=-1),t(),e(),d[f+1].classList.add("slider__item_active"),s[f+1].classList.add("page-pagination__item--active"),f++}),function(){for(var t=0;t<d.length;t++)(u=document.createElement("div")).className="page-pagination__item",_.appendChild(u),u.addEventListener("click",function(t){s=document.querySelectorAll(".page-pagination__item"),e();for(var i=0;i<_.children.length;i++)_.children[i]==t.target&&(f=i);n(f)})}(),n(0);var g=document.querySelectorAll(".rewiews__detil");for(a=0;a<g.length;a++)g[a].addEventListener("click",function(){var e=document.querySelectorAll(".abs");console.log(e);for(var t=0;t<e.length;t++)e[t].classList.remove("abs--active");this.children[0].classList.add("abs--active")});var h=document.querySelectorAll(".questions__item");for(document.querySelectorAll(".questions__answers"),a=0;a<h.length;a++)h[a].addEventListener("click",function(){console.log(window.getComputedStyle(this.children[1],null).height),this.children[0].classList.toggle("questions__text--active"),this.children[1].classList.toggle("questions__answers--active")})});var Counter=function(){function e(e){var t=document.querySelector("#days"),n=document.querySelector("#minutes"),i=document.querySelector("#hours"),o=document.querySelector("#sec"),l={days:Math.floor(c/864e5),hours:Math.floor(c%864e5/1e3/60/60),minutes:Math.floor(c%864e5%36e5/1e3/60),sec:Math.floor(c%864e5%36e5%6e4/1e3)};o.textContent=l.sec<10?"0"+l.sec:l.sec,n.textContent=l.minutes,i.textContent=l.hours,t.textContent=l.days}var t,n=new Date,i=new Date(2017,11,7),c=i-n;PubSub.subscribe("init",function(){t=setInterval(function(){(c=Math.round(i-Date.now()))<0?clearInterval(t):e()},1e3)})}(),Calc=function(){var e=document.querySelectorAll(".calc-button")[0],t=document.querySelectorAll(".calc-modal")[0],n=document.querySelectorAll(".slideValue"),i=document.querySelectorAll(".slider"),c=i[0].value,o=document.querySelectorAll(".rooms-count__item--active")[0],l=document.querySelectorAll(".price-offers__item--active")[0],r=document.querySelectorAll(".rooms-count__item"),a=document.querySelectorAll(".price-offers__item");i[0].addEventListener("input",function(){c=i[0].value,n[0].innerHTML=c+" м <sup>2</sup>"});for(var s=0;s<r.length;s++)r[s].addEventListener("click",function(){for(var e=0;e<r.length;e++)r[e].classList.remove("rooms-count__item--active");this.classList.add("rooms-count__item--active"),o=document.querySelectorAll(".rooms-count__item--active")[0]});for(s=0;s<a.length;s++)a[s].addEventListener("click",function(){for(var e=0;e<a.length;e++)a[e].classList.remove("price-offers__item--active");this.classList.add("price-offers__item--active"),l=document.querySelectorAll(".price-offers__item--active")[0]});PubSub.subscribe("init",function(){e.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".calc-modal__rooms")[0].innerHTML=o.innerHTML,document.querySelectorAll(".calc-modal__repair")[0].innerHTML=l.children[1].innerHTML.split(" ")[0],document.querySelectorAll(".calc-modal__sq")[0].innerHTML=c+" м <sup>2</sup>",t.classList.add("visible")})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvdW50ZXIuanMiLCJjYWxjLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0UGFnaW5hdGlvbiIsImoiLCJwYWdJdGVtcyIsImxlbmd0aCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlc2V0IiwiaSIsInNsaWRlckl0ZW1zIiwic3RhcnRTbGlkZSIsImN1cnJlbnRTbGlkZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGQiLCJQdWJTdWIiLCJwdWJsaXNoIiwib3JkZXJCdXR0b25zIiwib3JkZXJXaW5kb3ciLCJjbG9zZUJ1dHRvbiIsInZpZGVvIiwicGxheVBhdXNlQnV0dG9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGhpcyIsInBhcmVudE5vZGUiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInBhdXNlZCIsInBsYXkiLCJwYXVzZSIsIm5ld0VsIiwiYXJyb3dMZWZ0IiwicXVlcnlTZWxlY3RvciIsImFycm93UmlnaHQiLCJwYWciLCJjdXJyZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiY2hpbGRyZW4iLCJ0YXJnZXQiLCJjcmVhdGVQYWdpbmF0aW9uIiwiZGV0YWlsQnV0dG9ucyIsImFicyIsImNvbnNvbGUiLCJsb2ciLCJxdWVzdGlvbnMiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiaGVpZ2h0IiwidG9nZ2xlIiwiQ291bnRlciIsImRpc3BsYXlUaW1lIiwic2Vjb25kTGVmdCIsImRheXMiLCJtaW51dGVzIiwiaG91cnMiLCJzZWMiLCJ0aW1lTGVmdCIsIk1hdGgiLCJmbG9vciIsInRleHRDb250ZW50IiwiY291bnRkb3duIiwibm93IiwiRGF0ZSIsInRoZW4iLCJzdWJzY3JpYmUiLCJzZXRJbnRlcnZhbCIsInJvdW5kIiwiY2xlYXJJbnRlcnZhbCIsIkNhbGMiLCJjYWxjQnV0dG9uIiwiY2FsY1dpbmRvdyIsInNsaWRlVmFsdWUiLCJzbGlkZXIiLCJmbGF0U3EiLCJ2YWx1ZSIsImZsYXRUeXBlIiwicmVwYWlyVHlwZSIsImNoZWNrRmxhdFR5cGUiLCJjaGVja1JlcGFpclR5cGUiLCJpbm5lckhUTUwiLCJzcGxpdCJdLCJtYXBwaW5ncyI6IkFBS0FBLFNBQUFDLGlCQUFBLG1CQUFBLFdBaURBLFNBQUFDLElBQ0EsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFDLEVBQUFDLE9BQUFGLElBQ0FDLEVBQUFELEdBQUFHLFVBQUFDLE9BQUEsaUNBcUJBLFNBQUFDLElBQ0EsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFDLEVBQUFMLE9BQUFJLElBQ0FDLEVBQUFELEdBQUFILFVBQUFDLE9BQUEsdUJBS0EsU0FBQUksRUFBQUMsR0FDQUosSUFDQUosRUFBQUosU0FBQWEsaUJBQUEsMEJBQ0FILEVBQUFFLEdBQUFOLFVBQUFRLElBQUEsdUJBQ0FWLEVBQUFRLEdBQUFOLFVBQUFRLElBQUEsaUNBakZBQyxPQUFBQyxRQUFBLFFBVUEsSUFBQSxJQVJBQyxFQUFBakIsU0FBQWEsaUJBQUEsaUJBRUFLLEVBQUFsQixTQUFBYSxpQkFBQSxnQkFDQU0sRUFBQW5CLFNBQUFhLGlCQUFBLFVBQ0FPLEVBQUFwQixTQUFBYSxpQkFBQSxTQUNBUSxFQUFBckIsU0FBQWEsaUJBQUEsc0JBR0FKLEVBQUEsRUFBQUEsRUFBQVEsRUFBQVosT0FBQUksSUFDQVEsRUFBQVIsR0FBQVIsaUJBQUEsUUFBQSxTQUFBcUIsR0FDQUEsRUFBQUMsaUJBQ0FMLEVBQUEsR0FBQVosVUFBQVEsSUFBQSxhQUlBLElBQUFMLEVBQUEsRUFBQUEsRUFBQVUsRUFBQWQsT0FBQUksSUFDQVUsRUFBQVYsR0FBQVIsaUJBQUEsUUFBQSxXQUNBdUIsS0FBQUMsV0FBQUEsV0FBQW5CLFVBQUFDLE9BQUEsYUFPQWMsRUFBQSxHQUFBcEIsaUJBQUEsUUFBQSxTQUFBeUIsR0FDQUEsRUFBQUMsa0JBQ0FQLEVBQUEsR0FBQVEsT0FDQVIsRUFBQSxHQUFBUyxPQUVBVCxFQUFBLEdBQUFVLFVBT0EsSUFL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QWFBRSxPQUFBb0QsVUFBQSxPQVRBLFdBQ0FLLEVBQUF2RSxpQkFBQSxRQUFBLFNBQUFxQixHQUNBQSxFQUFBQyxpQkFDQXZCLFNBQUFhLGlCQUFBLHNCQUFBLEdBQUFxRSxVQUFBSixFQUFBSSxVQUNBbEYsU0FBQWEsaUJBQUEsdUJBQUEsR0FBQXFFLFVBQUFILEVBQUF2QyxTQUFBLEdBQUEwQyxVQUFBQyxNQUFBLEtBQUEsR0FDQW5GLFNBQUFhLGlCQUFBLG1CQUFBLEdBQUFxRSxVQUFBTixFQUFBLGtCQUNBSCxFQUFBbkUsVUFBQVEsSUFBQSxlQWpEQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgY29uc29sZS5sb2coJ0hlbGxvJyk7XHJcbn0pKCk7XHJcbiovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCl7XHJcblxyXG4gIFB1YlN1Yi5wdWJsaXNoKCAnaW5pdCcpO1xyXG4gIFxyXG4gIHZhciBvcmRlckJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV0dG9uLW9yZGVyJyksXHJcbiAgICAgIFxyXG4gICAgICBvcmRlcldpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcmRlci1tb2RhbCcpLFxyXG4gICAgICBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpLFxyXG4gICAgICB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ZpZGVvJyksXHJcbiAgICAgIHBsYXlQYXVzZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFmZl9fdmlkZW8tcGxheScpO1xyXG5cclxuICAvLyDQvtGC0LrRgNGL0YLQuNC1INC4INC30LDQutGA0YvRgtC40LUg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyQnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgb3JkZXJCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBvcmRlcldpbmRvd1swXS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICB9KVxyXG4gIH07XHJcbiAgXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9zZUJ1dHRvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgY2xvc2VCdXR0b25baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICB9KVxyXG4gIH07XHJcbiBcclxuXHJcblxyXG4gIC8vINCh0LrRgNC40L/RgtGLINC00LvRjyDQstC40LTQtdC+XHJcbiAgcGxheVBhdXNlQnV0dG9uWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKHZpZGVvWzBdLnBhdXNlZCkge1xyXG4gICAgICB2aWRlb1swXS5wbGF5KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2aWRlb1swXS5wYXVzZSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8g0JTQu9GPINGB0LvQsNC50LTQtdGA0LAg0YEg0L7RgtC30YvQstCw0LzQuCBcclxuXHJcbiAgdmFyIHNsaWRlckl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJld2lld3NfX2l0ZW0nKSxcclxuICAgICAgYXJyb3dMZWZ0ICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnJvdy1sZWZ0JyksXHJcbiAgICAgIGFycm93UmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXJyb3ctcmlnaHQnKSxcclxuICAgICAgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLFxyXG4gICAgICBwYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS1wYWdpbmF0aW9uLS1saW5lYXInKSxcclxuICAgICAgcGFnSXRlbXMsXHJcbiAgICAgIG5ld0VsLFxyXG4gICAgICBjdXJyZW50ID0gMDtcclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIHJlc2V0UGFnaW5hdGlvbigpIHtcclxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgcGFnSXRlbXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIHBhZ0l0ZW1zW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2UtcGFnaW5hdGlvbl9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjcmVhdGVQYWdpbmF0aW9uKCkge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzbGlkZXJJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbmV3RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIG5ld0VsLmNsYXNzTmFtZSA9IFwicGFnZS1wYWdpbmF0aW9uX19pdGVtXCI7XHJcbiAgICAgICAgICBwYWcuYXBwZW5kQ2hpbGQobmV3RWwpO1xyXG4gICAgICAgICAgbmV3RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHBhZ0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UtcGFnaW5hdGlvbl9faXRlbScpO1xyXG4gICAgICAgICAgICByZXNldFBhZ2luYXRpb24oKTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHBhZy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYocGFnLmNoaWxkcmVuW2pdID09IGUudGFyZ2V0KSBjdXJyZW50ICA9IGo7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFydFNsaWRlKGN1cnJlbnQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNsaWRlckl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBzbGlkZXJJdGVtc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgZnVuY3Rpb24gc3RhcnRTbGlkZShjdXJyZW50U2xpZGUpIHtcclxuICAgICAgICByZXNldCgpO1xyXG4gICAgICAgIHBhZ0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UtcGFnaW5hdGlvbl9faXRlbScpXHJcbiAgICAgICAgc2xpZGVySXRlbXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgcGFnSXRlbXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QuYWRkKCdwYWdlLXBhZ2luYXRpb25fX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBzbGlkZUxlZnQoKSB7XHJcbiAgICAgICAgcmVzZXQoKTtcclxuICAgICAgICByZXNldFBhZ2luYXRpb24oKTtcclxuICAgICAgICBzbGlkZXJJdGVtc1tjdXJyZW50LTFdLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9faXRlbV9hY3RpdmUnKTtcclxuICAgICAgICBwYWdJdGVtc1tjdXJyZW50LTFdLmNsYXNzTGlzdC5hZGQoJ3BhZ2UtcGFnaW5hdGlvbl9faXRlbS0tYWN0aXZlJylcclxuICAgICAgICBjdXJyZW50IC0tO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBzbGlkZVJpZ2h0KCkge1xyXG4gICAgICAgIHJlc2V0KCk7XHJcbiAgICAgICAgcmVzZXRQYWdpbmF0aW9uKCk7XHJcbiAgICAgICAgc2xpZGVySXRlbXNbY3VycmVudCsxXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2l0ZW1fYWN0aXZlJyk7XHJcbiAgICAgICAgcGFnSXRlbXNbY3VycmVudCsxXS5jbGFzc0xpc3QuYWRkKCdwYWdlLXBhZ2luYXRpb25fX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgIGN1cnJlbnQgKys7XHJcbiAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgIGFycm93TGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKGN1cnJlbnQgPT09IDApe1xyXG4gICAgICAgICAgY3VycmVudCA9IHNsaWRlckl0ZW1zLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpZGVMZWZ0KCk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBhcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoY3VycmVudCA9PT0gc2xpZGVySXRlbXMubGVuZ3RoIC0gMSl7XHJcbiAgICAgICAgICBjdXJyZW50ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNsaWRlUmlnaHQoKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNyZWF0ZVBhZ2luYXRpb24oKTtcclxuICAgICAgc3RhcnRTbGlkZSgwKTtcclxuICBcclxuXHJcblxyXG4gIHZhciBkZXRhaWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJld2lld3NfX2RldGlsJyk7XHJcbiAgICBcclxuICBmb3IodmFyIGk9MDsgaTxkZXRhaWxCdXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBcclxuICAgIGRldGFpbEJ1dHRvbnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICB2YXIgYWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFicycpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYWJzKTtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYWJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGFic1tqXS5jbGFzc0xpc3QucmVtb3ZlKCdhYnMtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ2Ficy0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgXHJcblxyXG5cclxuLy8g0KHQtdC60YbQuNGPINCy0L7Qv9GA0L7RgdGLXHJcblxyXG52YXIgcXVlc3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnF1ZXN0aW9uc19faXRlbScpO1xyXG52YXIgYW5zdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnF1ZXN0aW9uc19fYW5zd2VycycpO1xyXG5cclxuZm9yKHZhciBpPTA7IGk8cXVlc3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgXHJcbiAgcXVlc3Rpb25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2cod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jaGlsZHJlblsxXSwgbnVsbCkuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC50b2dnbGUoJ3F1ZXN0aW9uc19fdGV4dC0tYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlblsxXS5jbGFzc0xpc3QudG9nZ2xlKCdxdWVzdGlvbnNfX2Fuc3dlcnMtLWFjdGl2ZScpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG59KTsiLCJ2YXIgQ291bnRlciA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICBcclxuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIHRoZW4gPSBuZXcgRGF0ZSAoMjAxNywgMTEsIDcpO1xyXG4gICAgdmFyIHNlY29uZExlZnQgPSB0aGVuIC1ub3c7XHJcbiAgICB2YXIgY291bnRkb3duLCBzZWNvbmRMZWZ0O1xyXG5cclxuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVRpbWUobXMpIHtcclxuXHJcbiAgICAgICAgdmFyIGRheUxlZnQgPSBNYXRoLmZsb29yKHNlY29uZExlZnQvODY0MDAwMDApLFxyXG4gICAgICAgICAgICBob3Vyc0xlZnQgPSAgTWF0aC5mbG9vcigoc2Vjb25kTGVmdCU4NjQwMDAwMCkvMTAwMC82MC82MCksXHJcbiAgICAgICAgICAgIG1pbkxlZnQgPSBNYXRoLmZsb29yKCgoc2Vjb25kTGVmdCU4NjQwMDAwMCklMzYwMDAwMCkvMTAwMC82MCksXHJcbiAgICAgICAgICAgIHNlY0xlZnQgPSBNYXRoLmZsb29yKCgoKHNlY29uZExlZnQlODY0MDAwMDApJTM2MDAwMDApJTYwMDAwKS8xMDAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGF5czogZGF5TGVmdCxcclxuICAgICAgICAgICAgaG91cnM6IGhvdXJzTGVmdCxcclxuICAgICAgICAgICAgbWludXRlczogbWluTGVmdCxcclxuICAgICAgICAgICAgc2VjOiAgIHNlY0xlZnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheVRpbWUoc2Vjb25kTGVmdCkge1xyXG5cclxuICAgICAgICB2YXIgZGF5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXlzJyksXHJcbiAgICAgICAgICAgIG1pbnV0ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWludXRlcycpLFxyXG4gICAgICAgICAgICBob3VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNob3VycycpLFxyXG4gICAgICAgICAgICBzZWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VjJyk7XHJcblxyXG4gICAgICAgIHZhciB0aW1lTGVmdCA9IHRyYW5zZm9ybVRpbWUoc2Vjb25kTGVmdCk7XHJcblxyXG4gICAgICAgIGlmICh0aW1lTGVmdC5zZWMgPCAxMCkge1xyXG4gICAgICAgICAgICBzZWMudGV4dENvbnRlbnQgPSAnMCcrdGltZUxlZnQuc2VjO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlYy50ZXh0Q29udGVudCA9IHRpbWVMZWZ0LnNlYztcclxuICAgICAgICB9IFxyXG4gICAgICAgICAgICBtaW51dGVzLnRleHRDb250ZW50ID0gdGltZUxlZnQubWludXRlcztcclxuICAgICAgICAgICAgaG91cnMudGV4dENvbnRlbnQgPSB0aW1lTGVmdC5ob3VycztcclxuICAgICAgICAgICAgZGF5cy50ZXh0Q29udGVudCA9IHRpbWVMZWZ0LmRheXM7XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb3VudGRvd24gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWNvbmRMZWZ0ID0gTWF0aC5yb3VuZCgodGhlbiAtIERhdGUubm93KCkpKTtcclxuICAgICAgICBpZihzZWNvbmRMZWZ0IDwgMCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGNvdW50ZG93bik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzcGxheVRpbWUoc2Vjb25kTGVmdClcclxuICAgICAgICAgIH0sMTAwMCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB2YXIgdG9rZW4gPSBQdWJTdWIuc3Vic2NyaWJlKCAnaW5pdCcsIGluaXQgKTtcclxuXHJcbn0pKCk7IiwidmFyIENhbGMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGNhbGNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsYy1idXR0b24nKVswXSxcclxuICAgICAgICBjYWxjV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGMtbW9kYWwnKVswXSxcclxuXHJcbiAgICAgICAgc2xpZGVWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZVZhbHVlJyksXHJcbiAgICAgICAgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcicpLFxyXG5cclxuICAgICAgICBmbGF0U3EgPSBzbGlkZXJbMF0udmFsdWUsXHJcbiAgICAgICAgZmxhdFR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbXMtY291bnRfX2l0ZW0tLWFjdGl2ZScpWzBdLFxyXG4gICAgICAgIHJlcGFpclR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJpY2Utb2ZmZXJzX19pdGVtLS1hY3RpdmUnKVswXSxcclxuXHJcbiAgICAgICAgY2hlY2tGbGF0VHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb29tcy1jb3VudF9faXRlbScpLFxyXG4gICAgICAgIGNoZWNrUmVwYWlyVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmljZS1vZmZlcnNfX2l0ZW0nKTtcclxuXHJcbiAgICAgICAgIC8vINC40LfQvNC10L3Rj9C10Lwg0L/Qu9C+0YnQsNC00Ywg0LrQstCw0YDRgtC40YDRi1xyXG4gICAgICAgIHNsaWRlclswXS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZmxhdFNxID0gc2xpZGVyWzBdLnZhbHVlO1xyXG4gICAgICAgICAgICBzbGlkZVZhbHVlWzBdLmlubmVySFRNTCA9IGZsYXRTcSArICcg0LwgPHN1cD4yPC9zdXA+JztcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INC60L7QvNC90LDRglxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tGbGF0VHlwZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjaGVja0ZsYXRUeXBlW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoZWNrRmxhdFR5cGUubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrRmxhdFR5cGVbal0uY2xhc3NMaXN0LnJlbW92ZSgncm9vbXMtY291bnRfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgncm9vbXMtY291bnRfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBmbGF0VHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb29tcy1jb3VudF9faXRlbS0tYWN0aXZlJylbMF07IFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vINC/0L7Qu9GD0YfQsNC10Lwg0YLQuNC/INGA0LXQvNC+0L3RgtCwXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja1JlcGFpclR5cGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2hlY2tSZXBhaXJUeXBlW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoZWNrUmVwYWlyVHlwZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tSZXBhaXJUeXBlW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByaWNlLW9mZmVyc19faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3ByaWNlLW9mZmVyc19faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHJlcGFpclR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJpY2Utb2ZmZXJzX19pdGVtLS1hY3RpdmUnKVswXTsgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIGNhbGNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjLW1vZGFsX19yb29tcycpWzBdLmlubmVySFRNTCA9IGZsYXRUeXBlLmlubmVySFRNTDtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGMtbW9kYWxfX3JlcGFpcicpWzBdLmlubmVySFRNTCA9IHJlcGFpclR5cGUuY2hpbGRyZW5bMV0uaW5uZXJIVE1MLnNwbGl0KFwiIFwiKVswXTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGMtbW9kYWxfX3NxJylbMF0uaW5uZXJIVE1MID0gZmxhdFNxICsgJyDQvCA8c3VwPjI8L3N1cD4nO1xyXG4gICAgICAgICAgICBjYWxjV2luZG93LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9ICBcclxuICAgICAgdmFyIHRva2VuID0gUHViU3ViLnN1YnNjcmliZSggJ2luaXQnLCBpbml0ICk7XHJcbiAgXHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
